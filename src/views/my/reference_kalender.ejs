<% const body = `
  <div class="card">
    <div class="h1">Kalender</div>
    <div class="p">Werknemer: <b>${employee.employee_name}</b>. Stel referentietijden in voor de komende 15 dagen.</div>

    ${ok ? `<div class="notice" style="margin:12px 0">Opgeslagen.</div>` : ``}
    ${error ? `<div class="notice" style="margin:12px 0">${error}</div>` : ``}

    <form method="post" action="/app/employees/${employee.id}/reference/kalender" style="margin-top:12px">
      <table class="table">
        <thead>
          <tr>
            <th>Datum</th>
            <th>Start</th>
            <th>Einde</th>
            <th>Pauze (min)</th>
          </tr>
        </thead>
        <tbody>
          ${rows.map(r => `
            <tr>
              <td>
                <input type="hidden" name="date" value="${r.date}">
                ${r.date}
              </td>
              <td><input type="time" name="start" value="${r.start_time || ""}"></td>
              <td><input type="time" name="end" value="${r.end_time || ""}"></td>
              <td><input type="number" min="0" name="break" value="${r.break_minutes ?? 0}"></td>
            </tr>
          `).join("")}
        </tbody>
      </table>

      <div style="display:flex;gap:10px;margin-top:12px;flex-wrap:wrap">
        <button class="btn" type="submit">Opslaan</button>
        <a class="btn ghost" href="/app/employees/${employee.id}/reference">Terug</a>
      </div>
    </form>
  </div>
` %>

<%- include("../_layout", {
  title: "Kalender - MyPunctoo",
  badge: company.company_name,
  topLink: { href: "/app/employees/" + employee.id + "/reference", label: "Terug" },
  logoutAction: "/logout",
  body
}) %>
